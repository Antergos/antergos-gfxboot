default start
implicit 1
display isolinux.msg
ui gfxboot bootlogo isolinux.msg
prompt   1
timeout  200

label start
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop udev.log-priority=crit rd.udev.log-priority=crit quiet splash

label harddisk
  com32 whichsys.c32
  append -iso- chain.c32 hd0 
  
menu begin ^Troubleshooting
  menu title Troubleshooting

label skylake
  menu label Intel Graphics (^Skylake)
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop i915.preliminary_hw_support=1

label intel
  menu label ^Intel Graphics (All)
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop nomodeset i915.modeset=0

label nvidia
  menu label ^NVIDIA Graphics
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop nomodeset nouveau.modeset=0

label amd
  menu label ^AMD Graphics
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop nomodeset radeon.modeset=0

label multi
  menu label Non-Graphical Boot
  kernel /%INSTALL_DIR%/boot/vmlinuz
  append initrd=/%INSTALL_DIR%/boot/intel_ucode.img,/%INSTALL_DIR%/boot/archiso.img archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% earlymodules=loop modules-load=loop rd.modules-load=loop systemd.unit=multi-user.target

menu separator

label returntomain
  menu label Return to ^main menu
  menu exit

menu end

label hdt
  kernel hdt.c32

label memtest
  kernel memtest
